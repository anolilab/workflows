name: "pnpm-lock-file-maintenance"

on: # yamllint disable-line rule:truthy
    schedule:
        - cron: "0 0 * * *" # Runs every day at midnight UTC

permissions:
    contents: "read"

jobs:
    pnpm-lock-file-maintenance:
        runs-on: "ubuntu-latest"
        steps:
            - name: "Harden the runner (Audit all outbound calls)"
              uses: "step-security/harden-runner@5ef0c079ce82195b2a36a210272d6b661572d83e" # v2.14.2
              with:
                  egress-policy: "audit"

            - name: "Checkout"
              uses: "actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd" # v6

            - name: "Run pnpm lock file maintenance"
              run: "pnpm install && pnpm up --latest"
              env:
                  NODE_AUTH_TOKEN: "${{ secrets.github_token }}"
